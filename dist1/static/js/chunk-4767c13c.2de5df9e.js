(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4767c13c"],{2532:function(e,t,a){"use strict";var s=a("23e7"),n=a("e330"),i=a("5a34"),r=a("1d80"),l=a("577e"),o=a("ab13"),c=n("".indexOf);s({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~c(l(r(this)),l(i(e)),arguments.length>1?arguments[1]:void 0)}})},3:function(e,t){},4:function(e,t){},"4d74":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("d2-container",[t("div",{staticClass:"about-content"},[t("div",{staticClass:"page-header-container"},[t("div",{staticClass:"page-header"},[t("h1",{staticClass:"title"},[e._v("Drug-MiRNA Association Probability")]),t("p",{staticClass:"subtitle"},[e._v(" Calculate the probability of association between drugs and miRNAs ")])])]),t("div",{staticClass:"content"},[t("div",{staticClass:"left-section"},[t("div",{staticClass:"section-header"},[t("i",{staticClass:"el-icon-connection"}),t("span",[e._v("Single Query Mode")])]),t("div",{staticClass:"input-section"},[t("el-input",{staticClass:"input-field",attrs:{placeholder:"Enter drug sequence",clearable:""},model:{value:e.drugSequence,callback:function(t){e.drugSequence=t},expression:"drugSequence"}})],1),t("div",{staticClass:"input-section"},[t("el-input",{staticClass:"input-field",attrs:{placeholder:"Enter RNA sequence",clearable:""},model:{value:e.rnaSequence,callback:function(t){e.rnaSequence=t},expression:"rnaSequence"}})],1),t("div",{staticClass:"action-section"},[t("el-button",{staticClass:"query-button",attrs:{type:"primary",loading:e.loading},on:{click:e.fetchRelation}},[e.loading?e._e():t("i",{staticClass:"el-icon-connection"}),e._v(" Calculate Probability ")])],1),t("div",{staticClass:"results-wrapper"},[t("transition",{attrs:{name:"fade"}},[e.result?t("div",{staticClass:"result-card"},[t("div",{staticClass:"result-header"},[t("h3",[e._v("Association Probability")])]),t("div",{staticClass:"result-content"},[t("div",{staticClass:"sequence-pair"},[t("div",{staticClass:"sequence-item"},[t("div",{staticClass:"sequence-label"},[t("i",{staticClass:"el-icon-cpu"}),t("span",[e._v("Drug Sequence:")])]),t("el-tooltip",{attrs:{content:e.result.drug_sequence,placement:"top"}},[t("div",{staticClass:"sequence-value"},[e._v(e._s(e.truncateSequence(e.result.drug_sequence,40)))])])],1),t("div",{staticClass:"sequence-item"},[t("div",{staticClass:"sequence-label"},[t("i",{staticClass:"el-icon-share"}),t("span",[e._v("RNA Sequence:")])]),t("el-tooltip",{attrs:{content:e.result.rna_sequence,placement:"top"}},[t("div",{staticClass:"sequence-value"},[e._v(e._s(e.truncateSequence(e.result.rna_sequence,40)))])])],1)]),t("div",{staticClass:"probability-display"},[t("div",{staticClass:"probability-header"},[e._v("Probability:")]),t("div",{staticClass:"probability-value"},[e._v(e._s(e.formatProbability(e.result.probability)))]),t("el-progress",{attrs:{percentage:100*e.result.probability,format:e.percentageFormat,color:e.customColorMethod(100*e.result.probability),"stroke-width":20}})],1)])]):t("div",{staticClass:"no-result"},[t("i",{staticClass:"el-icon-connection empty-icon"}),t("p",[t("i",{staticClass:"el-icon-info-circle"}),e._v(" Please enter both drug and RNA sequences to calculate their association probability ")]),t("el-button",{attrs:{type:"text"},on:{click:e.showHelp}},[e._v("Need help?")])],1)])],1)]),t("div",{staticClass:"right-section"},[t("div",{staticClass:"section-header"},[t("i",{staticClass:"el-icon-upload"}),t("span",[e._v("Batch Upload Mode")])]),t("div",{staticClass:"batch-instruction"},[t("i",{staticClass:"el-icon-info-circle"}),t("span",[e._v("Upload a file containing drug and RNA sequence pairs to analyze multiple associations at once")])]),t("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"before-upload":e.beforeUpload,"on-change":e.handleChange,"on-success":e.handleUploadSuccess,"on-error":e.handleUploadError,"file-list":e.fileList,"http-request":e.handleUpload,accept:".xlsx, .xls, .csv",drag:""}},[t("div",{staticClass:"upload-content"},[t("div",{staticClass:"upload-icon"},[t("i",{staticClass:"el-icon-upload"})]),t("div",{staticClass:"upload-text"},[t("p",{staticClass:"main-text"},[e._v(" Drop your file here or "),t("em",[e._v("click to upload")])]),t("p",{staticClass:"upload-hint"},[e._v("Support for .xlsx, .xls and .csv files")]),t("p",{staticClass:"upload-format"},[e._v("File should contain columns: drug_sequence and rna_sequence")])])])]),t("transition",{attrs:{name:"fade"}},[e.table.data.length>0?t("div",{staticClass:"table-wrapper"},[t("div",{staticClass:"table-header"},[t("h3",[e._v("Uploaded Data Preview")]),t("el-button",{attrs:{type:"text",icon:"el-icon-download"},on:{click:e.exportData}},[e._v(" Export Data ")])],1),t("el-table",{staticClass:"upload-table",attrs:{data:e.table.data,stripe:!0,border:!0,height:"calc(100vh - 500px)"}},e._l(e.table.columns,(function(e,a){return t("el-table-column",{key:a,attrs:{prop:e.prop,label:e.label,"min-width":"120"}})})),1)],1):e._e()])],1)]),t("el-dialog",{attrs:{title:"Drug-RNA Association Help",visible:e.helpDialogVisible,width:"50%","custom-class":"help-dialog"},on:{"update:visible":function(t){e.helpDialogVisible=t}}},[t("div",{staticClass:"help-content"},[t("h3",[e._v("How to use the Drug-RNA Association Calculator")]),t("h4",[e._v("Single Query Mode")]),t("ol",[t("li",[e._v("Enter a valid drug sequence in the first input field")]),t("li",[e._v("Enter a valid RNA sequence in the second input field")]),t("li",[e._v('Click the "Calculate Probability" button')]),t("li",[e._v("View the association probability result")])]),t("h4",[e._v("Batch Upload")]),t("ol",[t("li",[e._v("Prepare a CSV or Excel file with two columns: drug_sequence and rna_sequence")]),t("li",[e._v("Each row should contain one drug-RNA pair")]),t("li",[e._v("Upload the file using the drag and drop area")]),t("li",[e._v("The system will process all pairs and return association probabilities")])]),t("div",{staticClass:"help-note"},[t("i",{staticClass:"el-icon-info"}),t("p",[e._v(" The probability score indicates the likelihood of association between the specific drug and RNA sequence pair ")])])])])],1)])},n=[],i=a("c7eb"),r=a("1da1"),l=(a("b680"),a("ac1f"),a("1276"),a("99af"),a("fb6a"),a("caad"),a("2532"),a("d81d"),a("d3b7"),a("159b"),a("1146")),o=a("c98b"),c=a("1f47");function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["b"])({url:"get_drug_rna_relation/",method:"post",timeout:15e3,data:{drug_sequence:e.drug_sequence,rna_sequence:e.rna_sequence}}).then((function(e){return console.log("hello scx"),console.log(e),null!=e?c["c"]({data:e}):(console.log("hahaha"),c["b"]({},"查询失败，请重试"))})).catch((function(e){return console.error("请求发生错误:",e),"ECONNABORTED"===e.code?c["b"]({},"请求超时，请稍后再试"):c["b"]({},"请求失败，请重试")}))}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["b"])({url:"get_all_drug_rna_relation/",method:"post",timeout:2e4,data:{data:e.data}}).then((function(e){return null!=e?c["c"]({data:e}):(console.log("hahaha"),c["b"]({},"Sending failed. Please try again."))})).catch((function(e){return console.error("An error has occurred with the request.",e),"ECONNABORTED"===e.code?c["b"]({},"Request timed out, please try again later"):c["b"]({},"Request failed. Please try again.")}))}var p={name:"DrugRnaRelation",data:function(){return{drugSequence:"",rnaSequence:"",result:null,loading:!1,fileList:[],table:{columns:[],data:[]},helpDialogVisible:!1,customColors:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#67c23a",percentage:60},{color:"#409eff",percentage:80},{color:"#6f7ad3",percentage:100}]}},methods:{fetchRelation:function(){var e=this;return Object(r["a"])(Object(i["a"])().mark((function t(){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.drugSequence&&e.rnaSequence){t.next=3;break}return e.$message.warning("Please enter both drug and RNA sequences"),t.abrupt("return");case 3:return e.loading=!0,t.prev=4,t.next=7,u({drug_sequence:e.drugSequence,rna_sequence:e.rnaSequence});case 7:a=t.sent,console.log("Response:",a),a&&a[1]&&a[1].data&&a[1].data.data?e.result=a[1].data.data:e.$message.error("Invalid response format"),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](4),console.error("Request failed",t.t0),e.$message.error("Request failed. Please try again later.");case 16:return t.prev=16,e.loading=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[4,12,16,19]])})))()},formatProbability:function(e){if(e<1e-4)return"0.0";var t=e.toFixed(10),a=t.split(".");return"".concat(a[0],".").concat(a[1].substring(0,4))},percentageFormat:function(e){var t=this.formatProbability(e/100);return t},customColorMethod:function(e){return e<30?"#f56c6c":e<50?"#e6a23c":e<70?"#67c23a":e<90?"#409eff":"#6f7ad3"},truncateSequence:function(e,t){return e?e.length>t?e.substring(0,t)+"...":e:""},showHelp:function(){this.helpDialogVisible=!0},beforeUpload:function(e){var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||"application/vnd.ms-excel"===e.type||"text/csv"===e.type;return t||this.$message.error("Only .xlsx, .xls and .csv files are accepted"),t},handleChange:function(e,t){this.fileList=t.slice(-1)},handleUploadSuccess:function(e,t,a){this.fileList=a,this.$message.success("Upload successful")},handleUploadError:function(e,t,a){this.$message.error("Upload failed")},handleUpload:function(e){var t=this;return Object(r["a"])(Object(i["a"])().mark((function a(){var s,n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.file,console.log("Uploading file:",s),t.loading=!0,n=new FileReader,n.onload=function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(a){var s,n,r,o,c,u,p,h,b;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=a.target.result,n=l["read"](s,{type:"binary"}),r=n.SheetNames[0],o=n.Sheets[r],c=l["utils"].sheet_to_json(o,{header:1}),!(c.length>1)){e.next=30;break}if(u=c[0],u.includes("drug_sequence")&&u.includes("rna_sequence")){e.next=11;break}return t.$message.error("The file must contain 'drug_sequence' and 'rna_sequence' columns"),t.loading=!1,e.abrupt("return");case 11:return p=c.slice(1),t.table.columns=u.map((function(e){return{label:e,prop:e}})),t.table.data=p.map((function(e){var t={};return u.forEach((function(a,s){t[a]=e[s]})),t})),console.log("Parsed table data:",t.table),e.prev=15,h=t.table.data.map((function(e){return{drug_sequence:e.drug_sequence,rna_sequence:e.rna_sequence}})),e.next=19,d({data:h});case 19:b=e.sent,console.log("Batch upload response:",b),0===b[1].code?(t.$message.success("File processed successfully. Calculating association probabilities."),b[1].data.data&&(window.location.href=b[1].data.data)):t.$message.error("Failed to process the file"),e.next=28;break;case 24:e.prev=24,e.t0=e["catch"](15),console.error("Error processing batch:",e.t0),t.$message.error("Failed to process batch request");case 28:e.next=31;break;case 30:t.$message.error("The file is empty or does not contain valid data");case 31:t.loading=!1;case 32:case"end":return e.stop()}}),e,null,[[15,24]])})));return function(t){return e.apply(this,arguments)}}(),n.onerror=function(e){console.error("Error reading file:",e),t.$message.error("Failed to read the file"),t.loading=!1},n.readAsBinaryString(s);case 7:case"end":return a.stop()}}),a)})))()},exportData:function(){var e=l["utils"].book_new(),t=l["utils"].json_to_sheet(this.table.data);l["utils"].book_append_sheet(e,t,"Results"),l["writeFile"](e,"drug_mirna_relations.xlsx")}}},h=p,b=(a("bd43"),a("2877")),f=Object(b["a"])(h,s,n,!1,null,"6ff99e7d",null);t["default"]=f.exports},5:function(e,t){},"5a34":function(e,t,a){var s=a("44e7"),n=TypeError;e.exports=function(e){if(s(e))throw n("The method doesn't accept regular expressions");return e}},ab13:function(e,t,a){var s=a("b622"),n=s("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[n]=!1,"/./"[e](t)}catch(s){}}return!1}},bd43:function(e,t,a){"use strict";a("d0de")},caad:function(e,t,a){"use strict";var s=a("23e7"),n=a("4d64").includes,i=a("d039"),r=a("44d2"),l=i((function(){return!Array(1).includes()}));s({target:"Array",proto:!0,forced:l},{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")},d0de:function(e,t,a){}}]);